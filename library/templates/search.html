{% extends "base.html" %}

{% block title %}search books{% endblock %}

{% block content%}
  <div class="ui inverted teal segment" align="center">
    图书搜索
  </div>

  <script>
    var byAuthor = false;
    function byAuthorChange(){
        byAuthor = !byAuthor
      };
    var byTitle = false
    function byTitleChange(){
        byTitle = !byTitle
      };
    var byPublisher = false
    function byPublisherChange(){
        byPublisher= !byPublisher
      };
  </script>

  <div class="ui action fluid input">
      <input type="text" placeholder="Search..." id = "search_info">
      <div class="ui button" id="search_button">图书检索</div>
  </div>
  </br>
  <div class="ui slider checkbox" >
      <input type="checkbox" id="byAuthor" onClick="byAuthorChange()">
      <label for="byAuthor">by author</label>
  </div>
  <div class="ui slider checkbox">
      <input type="checkbox" id="byPublisher" onClick="byPublisherChange()">
      <label for="byPublisher">by publisher</label>
  </div>
  <div class="ui slider checkbox">
      <input type="checkbox" id="byTitle" onClick="byTitleChange()">
      <label for="byTitle">by title</label>
  </div>

  </br>
  </br>

	<div class="ui inverted blue segment">
		<h2>Search Result</h2>
	</div>

  <div class="ui list">
  {% for book in books %}
    <div class="item">
      <div class="ui list">Title:{{book.title}}
	     	<div class="item"> authors:
	     		{% for author in book.authors %}	
	        		<span>	{{author.first_name}} {{author.last_name}} </span>
	      		{% endfor %}
	     	<div class="item">publisher:{{book.publisher.name}}</div>
      </div>
    </div>
  {% endfor %}
  </div>

  <script>
  $(document).ready(function (){
    $("#search_button").click(function(){
      var info = $("#search_info").val();
      var urlstr = "/search?"+"info="+info+"&byAuthor="+byAuthor+"&byTitle="+byTitle+"&byPublisher="+byPublisher;
      location.href = urlstr
    })
  })
  </script>

{% endblock %}
